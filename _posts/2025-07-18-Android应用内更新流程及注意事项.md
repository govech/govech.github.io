---
title: Androidåº”ç”¨å†…æ›´æ–°æµç¨‹åŠæ³¨æ„äº‹é¡¹
date: 2025-07-18
---



Apkæ›´æ–°æµç¨‹ä¸»è¦åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªé˜¶æ®µï¼š**æ£€æµ‹æ›´æ–° â†’ æç¤ºç”¨æˆ· â†’ ä¸‹è½½APK â†’ å®‰è£…APK**ï¼Œä¸‹é¢æ˜¯è¯¦ç»†çš„å®Œæ•´æµç¨‹è¯´æ˜ï¼Œé€‚ç”¨äº Android åº”ç”¨çš„è‡ªåŠ¨æˆ–æ‰‹åŠ¨æ›´æ–°åœºæ™¯ï¼ˆä¸é€šè¿‡åº”ç”¨å•†åº—æˆ–Google Playï¼‰ã€‚

------

## ğŸ” APKæ›´æ–°å®Œæ•´æµç¨‹

### ä¸€ã€æ›´æ–°æ£€æµ‹ï¼ˆCheck Updateï¼‰

1. **å®¢æˆ·ç«¯å¯åŠ¨æ—¶æˆ–åœ¨è®¾ç½®ä¸­ç‚¹å‡»â€œæ£€æŸ¥æ›´æ–°â€**

2. **å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨**ï¼Œæºå¸¦å½“å‰ App çš„ç‰ˆæœ¬å·ï¼ˆ`versionCode` å’Œ/æˆ– `versionName`ï¼‰ï¼š

   ```json
   {
     "packageName": "com.example.app",
     "versionCode": 1001
   }
   ```

3. **æœåŠ¡å™¨è¿”å›æ›´æ–°ä¿¡æ¯**ï¼ˆæ˜¯å¦éœ€è¦æ›´æ–°ï¼Œæ›´æ–°å†…å®¹ï¼Œä¸‹è½½åœ°å€ç­‰ï¼‰ï¼š

   ```json
   {
     "update": true,
     "latestVersionCode": 1005,
     "latestVersionName": "1.0.5",
     "apkUrl": "https://yourdomain.com/app-release.apk",
     "isForceUpdate": false,
     "updateLog": "1. ä¿®å¤è‹¥å¹²Bug\n2. æ–°å¢XXXåŠŸèƒ½"
   }
   ```

------

### äºŒã€æç¤ºç”¨æˆ·ï¼ˆShow Update Dialogï¼‰

æ ¹æ®è¿”å›çš„å†…å®¹ï¼Œå±•ç¤ºæ›´æ–°æç¤ºå¼¹çª—ï¼š

- âœ” æ˜¯å¦ä¸º**å¼ºåˆ¶æ›´æ–°**
- âœ” å±•ç¤ºæ›´æ–°å†…å®¹ï¼ˆChangelogï¼‰
- âœ” æä¾›â€œç«‹å³æ›´æ–°â€å’Œâ€œä»¥åå†è¯´â€æŒ‰é’®ï¼ˆå¼ºæ›´æ—¶åªèƒ½â€œç«‹å³æ›´æ–°â€ï¼‰

------

### ä¸‰ã€APKä¸‹è½½ï¼ˆDownload APKï¼‰

æœ‰ä¸‰ç§ä¸‹è½½æ–¹å¼ï¼š

#### âœ… æ¨èï¼šä½¿ç”¨ Android ç³»ç»Ÿçš„ `DownloadManager`

- ä¼˜ç‚¹ï¼šæ”¯æŒé€šçŸ¥æ ä¸‹è½½ã€ç³»ç»Ÿæ§åˆ¶æ–­ç‚¹ç»­ä¼ ã€ä¸‹è½½å®Œæˆè‡ªåŠ¨é€šçŸ¥
- ç¼ºç‚¹ï¼šä¸èƒ½è‡ªå®šä¹‰ UI

#### æˆ–è€…ï¼šä½¿ç”¨ `OkHttp` / `Retrofit` + `Coroutines` / `RxJava` å®ç°è‡ªå®šä¹‰ä¸‹è½½å™¨

- æ”¯æŒè‡ªå®šä¹‰è¿›åº¦æ¡ã€ä¸‹è½½è·¯å¾„ã€ç›‘å¬è¿›åº¦
- å¯ç»“åˆ Room å®ç°æ–­ç‚¹ç»­ä¼ 

#### æ³¨æ„ï¼š

- ä¸‹è½½æ–‡ä»¶åº”ä¿å­˜ä¸º `*.apk`ï¼Œæ¨èè·¯å¾„ï¼š

  ```kotlin
  getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS)
  ```

------

### å››ã€å®‰è£… APKï¼ˆInstall APKï¼‰

#### Android 6.0 ä»¥ä¸‹

- ç›´æ¥ä½¿ç”¨éšå¼ Intent å®‰è£… APKï¼š

  ```kotlin
  Intent(Intent.ACTION_VIEW).apply {
      setDataAndType(uri, "application/vnd.android.package-archive")
      flags = Intent.FLAG_ACTIVITY_NEW_TASK
  }
  ```

#### Android 7.0+

- éœ€è¦é€šè¿‡ `FileProvider` å…±äº« APK æ–‡ä»¶

- URI ä½¿ç”¨ `FileProvider.getUriForFile(context, authority, file)`

- å¿…é¡»æ·»åŠ æƒé™ï¼š

  ```xml
  <uses-permission android:name="android.permission.REQUEST_INSTALL_PACKAGES"/>
  ```

#### Android 8.0+

- éœ€è¦ç”¨æˆ·æˆæƒå®‰è£…æœªçŸ¥æ¥æºçš„ APKï¼ˆç³»ç»Ÿä¼šè‡ªåŠ¨å¼¹å‡ºï¼‰

  ```kotlin
  if (!packageManager.canRequestPackageInstalls()) {
      startActivity(Intent(Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES))
  }
  ```



## âœ… å¯é€‰ä¼˜åŒ–åŠŸèƒ½

### 1. åå°è‡ªåŠ¨ä¸‹è½½ + å¼¹çª—æç¤ºå®‰è£…

- æå‰ä¸‹è½½å¥½ APKï¼Œåœ¨ç”¨æˆ·ç©ºé—²æ—¶æç¤ºå®‰è£…

### 2. æ£€æŸ¥æ˜¯å¦å·²ç»ä¸‹è½½è¿‡ç›¸åŒç‰ˆæœ¬

- æ¯”å¯¹ APK MD5 æˆ–æœ¬åœ°æ–‡ä»¶ç‰ˆæœ¬ä¿¡æ¯

### 3. åˆ†æ¸ é“æ›´æ–°ï¼ˆç°åº¦å‘å¸ƒï¼‰

- æœåŠ¡ç«¯æ ¹æ®ç”¨æˆ·æ¸ é“ã€ç‰ˆæœ¬ã€è®¾å¤‡ä¿¡æ¯è¿”å›æ˜¯å¦å…è®¸æ›´æ–°

------

## ğŸ” å®‰å…¨æ€§å»ºè®®

- APK æœåŠ¡å™¨é“¾æ¥åº”ä¸º HTTPS
- APK åº”ç­¾åéªŒè¯
- å¯æ·»åŠ  MD5 æ ¡éªŒé˜²æ­¢ä¸‹è½½è¢«åŠ«æŒ
- æ”¯æŒå¢é‡æ›´æ–°ï¼ˆå¦‚ä½¿ç”¨è…¾è®¯ Tinker æˆ– Google Play App Bundleï¼‰

------

## ğŸ§ª ç¤ºä¾‹æ¥å£çº¦å®šï¼ˆæœåŠ¡ç«¯ï¼‰

| å­—æ®µå            | ç±»å‹    | è¯´æ˜         |
| ----------------- | ------- | ------------ |
| update            | Boolean | æ˜¯å¦æœ‰æ›´æ–°   |
| forceUpdate       | Boolean | æ˜¯å¦å¼ºåˆ¶æ›´æ–° |
| apkUrl            | String  | APK ä¸‹è½½åœ°å€ |
| updateLog         | String  | æ›´æ–°å†…å®¹     |
| latestVersionCode | Int     | æœ€æ–°ç‰ˆæœ¬å·   |
| latestVersionName | String  | æœ€æ–°ç‰ˆæœ¬å   |



ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Kotlin APK æ›´æ–°æ¨¡å—ç¤ºä¾‹ï¼Œé‡‡ç”¨ **MVVM æ¶æ„ + åç¨‹ + è‡ªå®šä¹‰æ›´æ–°å¼¹çª— + OkHttp ä¸‹è½½å™¨ + FileProvider å®‰è£…æ”¯æŒ**ï¼Œé€‚åˆé›†æˆè¿›ä½ è‡ªå·±çš„é¡¹ç›®ä¸­ã€‚

------

## âœ… æ–‡ä»¶ç»“æ„ç¤ºä¾‹

```
app/
â””â”€â”€ update/
    â”œâ”€â”€ UpdateManager.kt         // æ›´æ–°æµç¨‹å…¥å£
    â”œâ”€â”€ UpdateInfo.kt            // æ›´æ–°ä¿¡æ¯æ•°æ®æ¨¡å‹
    â”œâ”€â”€ UpdateDialog.kt          // è‡ªå®šä¹‰æ›´æ–°å¼¹çª—
    â”œâ”€â”€ ApkDownloader.kt         // ä¸‹è½½å™¨
    â””â”€â”€ ApkInstaller.kt          // å®‰è£…å™¨
```

------

## 1ï¸âƒ£ æ•°æ®æ¨¡å‹ï¼š`UpdateInfo.kt`

```kotlin
data class UpdateInfo(
    val update: Boolean,
    val forceUpdate: Boolean,
    val apkUrl: String,
    val updateLog: String,
    val latestVersionCode: Int,
    val latestVersionName: String
)
```

------

## 2ï¸âƒ£ å¼¹çª—ç•Œé¢ï¼š`UpdateDialog.kt`

```kotlin
class UpdateDialog(
    context: Context,
    private val info: UpdateInfo,
    private val onConfirm: () -> Unit
) : AlertDialog(context) {

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setTitle("å‘ç°æ–°ç‰ˆæœ¬ ${info.latestVersionName}")
        setMessage(info.updateLog)
        setCancelable(!info.forceUpdate)

        setButton(BUTTON_POSITIVE, "ç«‹å³æ›´æ–°") { _, _ -> onConfirm() }

        if (!info.forceUpdate) {
            setButton(BUTTON_NEGATIVE, "ä»¥åå†è¯´") { _, _ -> dismiss() }
        }
    }
}
```

------

## 3ï¸âƒ£ APK ä¸‹è½½å™¨ï¼š`ApkDownloader.kt`

```kotlin
object ApkDownloader {

    suspend fun download(context: Context, url: String): File = withContext(Dispatchers.IO) {
        val request = Request.Builder().url(url).build()
        val client = OkHttpClient()

        val response = client.newCall(request).execute()
        if (!response.isSuccessful) throw IOException("Download failed: ${response.code}")

        val file = File(context.getExternalFilesDir(Environment.DIRECTORY_DOWNLOADS), "update.apk")
        val sink = file.sink().buffer()
        sink.writeAll(response.body!!.source())
        sink.close()

        file
    }
}
```

------

## 4ï¸âƒ£ å®‰è£…å™¨ï¼š`ApkInstaller.kt`

```kotlin
object ApkInstaller {

    fun install(context: Context, apkFile: File) {
        val apkUri: Uri = FileProvider.getUriForFile(
            context,
            "${context.packageName}.fileprovider",
            apkFile
        )

        val intent = Intent(Intent.ACTION_VIEW).apply {
            setDataAndType(apkUri, "application/vnd.android.package-archive")
            addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_ACTIVITY_NEW_TASK)
        }

        context.startActivity(intent)
    }
}
```

ğŸ”§ åˆ«å¿˜äº†åœ¨ `AndroidManifest.xml` é…ç½® FileProviderï¼š

```xml
<provider
    android:name="androidx.core.content.FileProvider"
    android:authorities="${applicationId}.fileprovider"
    android:exported="false"
    android:grantUriPermissions="true">
    <meta-data
        android:name="android.support.FILE_PROVIDER_PATHS"
        android:resource="@xml/file_paths" />
</provider>
```

`res/xml/file_paths.xml` å†…å®¹ï¼š

```xml
<paths xmlns:android="http://schemas.android.com/apk/res/android">
    <external-files-path
        name="download"
        path="Download/" />
</paths>
```

------

## 5ï¸âƒ£ æ›´æ–°æµç¨‹æ§åˆ¶å™¨ï¼š`UpdateManager.kt`

```kotlin
object UpdateManager {

    fun checkUpdate(context: Context, currentVersionCode: Int, serverInfo: UpdateInfo) {
        if (serverInfo.update && serverInfo.latestVersionCode > currentVersionCode) {
            val dialog = UpdateDialog(context, serverInfo) {
                CoroutineScope(Dispatchers.Main).launch {
                    try {
                        val apkFile = ApkDownloader.download(context, serverInfo.apkUrl)
                        ApkInstaller.install(context, apkFile)
                    } catch (e: Exception) {
                        Toast.makeText(context, "ä¸‹è½½å¤±è´¥: ${e.message}", Toast.LENGTH_LONG).show()
                    }
                }
            }
            dialog.show()
        }
    }
}
```

------

## ğŸ§ª ç”¨æ³•ç¤ºä¾‹ï¼ˆMainActivityï¼‰

```kotlin
val currentVersionCode = BuildConfig.VERSION_CODE

val updateInfo = UpdateInfo(
    update = true,
    forceUpdate = false,
    apkUrl = "https://yourdomain.com/app-release.apk",
    updateLog = "1. ä¼˜åŒ–æ€§èƒ½\n2. ä¿®å¤Bug",
    latestVersionCode = 1002,
    latestVersionName = "1.0.2"
)

UpdateManager.checkUpdate(this, currentVersionCode, updateInfo)
```



## âœ… ç°åº¦æ›´æ–°ç­–ç•¥

é€šè¿‡å®¢æˆ·ç«¯ä¸ŠæŠ¥ä¿¡æ¯ï¼ˆå¦‚ userIdã€æ¸ é“ã€è®¾å¤‡ã€ç‰ˆæœ¬å·ï¼‰ï¼ŒæœåŠ¡å™¨æ ¹æ®ç­–ç•¥è¿”å›æ˜¯å¦æ›´æ–°ã€‚

------

## ğŸ” æ›´æ–°é€»è¾‘æ”¹é€ ç‚¹ï¼ˆç®€æ´ç‰ˆï¼‰

### 1. å®¢æˆ·ç«¯ä¸ŠæŠ¥æ›´å¤šå­—æ®µï¼ˆå¦‚ç”¨æˆ·IDï¼‰

æ›´æ–°æ£€æµ‹æ¥å£è¯·æ±‚å‚æ•°ç¤ºä¾‹ï¼š

```json
{
  "versionCode": 1001,
  "packageName": "com.example.app",
  "userId": "123456",
  "channel": "official",
  "deviceBrand": "Xiaomi",
  "region": "CN"
}
```

### 2. æœåŠ¡ç«¯å“åº”ï¼ˆç°åº¦æ§åˆ¶ï¼‰

è¿”å›å­—æ®µä¿æŒä¸€è‡´ï¼š

```json
{
  "update": true,
  "forceUpdate": false,
  "apkUrl": "https://yourdomain.com/update.apk",
  "updateLog": "ç°åº¦ç‰ˆæœ¬æ›´æ–°è¯´æ˜...",
  "latestVersionCode": 1002,
  "latestVersionName": "1.0.2"
}
```

------

## ğŸ”§ å®¢æˆ·ç«¯å®ç°æ”¯æŒç°åº¦æ§åˆ¶

### âœ… 1. å®šä¹‰è¯·æ±‚æ¨¡å‹ï¼ˆå¯é€‰ï¼‰

```kotlin
data class UpdateRequest(
    val versionCode: Int,
    val packageName: String,
    val userId: String,
    val channel: String,
    val deviceBrand: String,
    val region: String
)
```

### âœ… 2. ä¿®æ”¹ `UpdateManager.kt` æ”¯æŒè¯·æ±‚æœåŠ¡ç«¯

```kotlin
object UpdateManager {

    suspend fun fetchUpdateInfo(context: Context, userId: String): UpdateInfo? {
        val request = UpdateRequest(
            versionCode = BuildConfig.VERSION_CODE,
            packageName = context.packageName,
            userId = userId,
            channel = "official", // æˆ–è€…ä»æ¸ é“ SDK è·å–
            deviceBrand = Build.BRAND,
            region = Locale.getDefault().country
        )

        // å‡è®¾ä½ ä½¿ç”¨ Retrofit å‘é€è¯·æ±‚
        val response = updateService.getUpdateInfo(request) // suspend å‡½æ•°
        return if (response.update) response else null
    }

    fun checkUpdateAndLaunch(
        context: Context,
        userId: String
    ) {
        CoroutineScope(Dispatchers.Main).launch {
            val info = fetchUpdateInfo(context, userId)
            if (info != null && info.latestVersionCode > BuildConfig.VERSION_CODE) {
                UpdateDialog(context, info) {
                    launch {
                        try {
                            val file = ApkDownloader.download(context, info.apkUrl)
                            ApkInstaller.install(context, file)
                        } catch (e: Exception) {
                            Toast.makeText(context, "ä¸‹è½½å¤±è´¥", Toast.LENGTH_SHORT).show()
                        }
                    }
                }.show()
            }
        }
    }
}
```

------

## ğŸ§  ç°åº¦ç­–ç•¥å»ºè®®ï¼ˆæœåŠ¡ç«¯å®ç°æ€è·¯ï¼‰

æœåŠ¡ç«¯å¯å®ç°ä»¥ä¸‹ç°åº¦ç­–ç•¥ï¼š

| ç­–ç•¥ç±»å‹       | ç¤ºä¾‹                                          |
| -------------- | --------------------------------------------- |
| æŒ‰ userId hash | `userId.hashCode() % 100 < 30`ï¼Œä»…30%ç”¨æˆ·æ›´æ–° |
| æŒ‰æ¸ é“         | `channel == "official"`                       |
| æŒ‰åœ°åŒº         | `region == "CN"`                              |
| æŒ‰æ—¶é—´æ®µ       | `now between 8:00-10:00`                      |
| æŒ‰è®¾å¤‡å“ç‰Œ     | `brand == "HUAWEI"`                           |



ä¾‹å¦‚ Java ç«¯ç¤ºä¾‹ä¼ªä»£ç ï¼š

```java
boolean isGrayUser = userId.hashCode() % 100 < 30;
if (isGrayUser) {
   return new UpdateInfo(...); // å…è®¸æ›´æ–°
} else {
   return new UpdateInfo(update = false); // ä¸æ›´æ–°
}
```

------

## ğŸ§ª ç¤ºä¾‹è°ƒç”¨ä»£ç 

```kotlin
UpdateManager.checkUpdateAndLaunch(context = this, userId = "u123456789")
```

## 

## âœ… åŠŸèƒ½å±‚é¢æ³¨æ„äº‹é¡¹

### 1. **æ˜¯å¦å¼ºåˆ¶æ›´æ–°ï¼ˆforceUpdateï¼‰**

- å¼ºåˆ¶æ›´æ–°ï¼šç”¨æˆ·**å¿…é¡»å‡çº§æ‰èƒ½ç»§ç»­ä½¿ç”¨**ï¼Œä¸€èˆ¬ç”¨äºå®‰å…¨æ¼æ´ä¿®å¤ã€åè®®å˜æ›´ç­‰ã€‚
- éå¼ºåˆ¶æ›´æ–°ï¼šç”¨æˆ·å¯ä»¥ç‚¹å‡»â€œç¨åæ›´æ–°â€ã€‚

ğŸ“Œ **æç¤ºè®¾è®¡å»ºè®®**ï¼š

- å¼ºæ›´æ—¶ç¦æ­¢å–æ¶ˆï¼ˆ`dialog.setCancelable(false)`ï¼‰
- å¼¹çª—æ— æ³•è¢«å…³é—­ï¼ˆç‚¹å‡»è¿”å›ã€èƒŒæ™¯æ— å“åº”ï¼‰

------

### 2. **æ”¯æŒæ–­ç‚¹ç»­ä¼ ä¸ç½‘ç»œå¼‚å¸¸æ¢å¤**

- ç”¨æˆ·å¯èƒ½ä¸­é€”é€€å‡ºã€æ–­ç½‘ã€é—ªé€€ï¼Œéœ€è¦æ”¯æŒæ–­ç‚¹ç»­ä¼ æˆ–é‡æ–°ä¸‹è½½ã€‚
- ä¸‹è½½å¤±è´¥ååº”æä¾›é‡è¯•æœºåˆ¶æˆ–é™çº§æç¤ºã€‚

------

### 3. **åå°ä¸‹è½½ä¸è¿›åº¦é€šçŸ¥**

- ä¸‹è½½è¿‡ç¨‹ä¸­æ˜¯å¦å…è®¸æœ€å°åŒ–æˆ–åå°è¿è¡Œï¼Ÿ
- æ˜¯å¦åœ¨é€šçŸ¥æ æ˜¾ç¤ºè¿›åº¦ï¼ˆé€‚åˆä½¿ç”¨ `DownloadManager` æˆ–æ‰‹åŠ¨å‘é€šçŸ¥ï¼‰

------

### 4. **ä¸‹è½½å®Œæˆåè‡ªåŠ¨å¼¹çª—å®‰è£…æç¤º**

- ä¸‹è½½å®Œæˆåè¦åŠæ—¶å¼•å¯¼ç”¨æˆ·å®‰è£…ã€‚
- å¯è‡ªåŠ¨å¼¹å‡ºå®‰è£…å¯¹è¯æ¡†ï¼Œä¹Ÿå¯è·³è½¬ç³»ç»Ÿå®‰è£…é¡µã€‚

------

### 5. **ç°åº¦æ›´æ–°ä¸ç‰ˆæœ¬æ§åˆ¶**

- å»ºè®®æ ¹æ® userIdã€æ¸ é“ã€ç‰ˆæœ¬å·ã€åœ°åŒº ç­‰æ§åˆ¶æ›´æ–°äººç¾¤ï¼ˆç°åº¦å‘å¸ƒï¼‰
- ä¸€å®šè¦ä¿è¯æœåŠ¡å™¨ç‰ˆæœ¬å·æ˜¯å¯é çš„ï¼ˆå¦‚ `latestVersionCode > currentVersionCode`ï¼‰

------

## ğŸ” æƒé™ä¸å®‰å…¨æ€§

### 1. **æœªçŸ¥æ¥æºå®‰è£…æƒé™ï¼ˆAndroid 8.0+ï¼‰**

```kotlin
if (!packageManager.canRequestPackageInstalls()) {
    startActivity(Intent(Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES))
}
```

- åº”æå‰æ£€æµ‹å¹¶å¼•å¯¼ç”¨æˆ·æˆæƒ

------

### 2. **FileProvider æ–‡ä»¶å…±äº«**

- Android 7.0+ ä¸èƒ½ç›´æ¥ `file://` å®‰è£…
- éœ€è¦ä½¿ç”¨ `FileProvider.getUriForFile(...)` ç”Ÿæˆåˆæ³• `content://` URI
- é…ç½® `provider` èŠ‚ç‚¹å’Œ XML æ–‡ä»¶è·¯å¾„

------

### 3. **ç­¾åæ ¡éªŒ**

- é˜²æ­¢ APK è¢«ç¯¡æ”¹ï¼Œåº”å¯ç”¨ç­¾åæ ¡éªŒæˆ–ä¸‹è½½åæ¯”å¯¹ `MD5` / `SHA256`
- APK å¿…é¡»ä¸ä½ åŸåº”ç”¨åŒç­¾åï¼Œå¦åˆ™æ— æ³•è¦†ç›–å®‰è£…

------

### 4. **HTTPS ä¸‹è½½åœ°å€**

- å¼ºçƒˆå»ºè®®åªä½¿ç”¨ `https://` ä¸‹è½½æ›´æ–°åŒ…
- é¿å…ä¸­é—´äººæ”»å‡»ã€åŠ«æŒ APK å†…å®¹

------

### 5. **ä¸è¦æ³„éœ²æ•æ„Ÿä¿¡æ¯**

- æ›´æ–°æ¥å£ä¸åº”è¿”å›è¿‡å¤šè°ƒè¯•ä¿¡æ¯
- APK ä¸‹è½½ URL å¯è®¾ç½®æœ‰æ•ˆæ—¶é—´æˆ–åŠ¨æ€ä»¤ç‰Œ

------

## ğŸ“± UI / UX ä½“éªŒä¼˜åŒ–

| é¡¹ç›®     | å»ºè®®                                   |
| -------- | -------------------------------------- |
| å¼¹çª—äº¤äº’ | ç®€æ´æ˜äº†ï¼Œçªå‡ºç‰ˆæœ¬å·ä¸æ›´æ–°å†…å®¹         |
| æ›´æ–°æ—¥å¿— | æ”¯æŒæ¢è¡Œä¸åŠ ç²—å…³é”®åŠŸèƒ½                 |
| ä¸‹è½½åŠ¨ç”» | è‡ªå®šä¹‰è¿›åº¦æ¡ã€æ˜¾ç¤ºç™¾åˆ†æ¯”               |
| å®‰è£…è¿‡ç¨‹ | ä¸‹è½½å®Œæˆç«‹å³å®‰è£… or ç”¨æˆ·ç‚¹å‡»æŒ‰é’®å†å®‰è£… |
| å¤šè¯­è¨€   | å¼¹çª—æ–‡æ¡ˆä¸æ›´æ–°è¯´æ˜åº”æ”¯æŒå›½é™…åŒ–         |



------

## ğŸ“¦ å…¶ä»–é«˜çº§æ³¨æ„äº‹é¡¹

### âœ… 1. åˆ†åŒ…æ›´æ–° / å¢é‡æ›´æ–°

- ä½¿ç”¨ Google App Bundle æˆ–ç¬¬ä¸‰æ–¹æ–¹æ¡ˆï¼ˆå¦‚ Tinkerï¼‰æ”¯æŒå¢é‡æ›´æ–°
- ä¼˜ç‚¹ï¼šèŠ‚çœä¸‹è½½æµé‡å’Œå®‰è£…æ—¶é—´

### âœ… 2. å¤šç‰ˆæœ¬é€‚é…

- å…¼å®¹ Android 6.0~14 çš„å®‰è£…é€»è¾‘
- Android 14ï¼ˆAPI 34ï¼‰èµ·å¯¹æŸäº›æƒé™å’Œ `PendingIntent` æœ‰æ›´ä¸¥æ ¼è¦æ±‚

### âœ… 3. å¤šæ¸ é“æ”¯æŒ

- AppCenterã€è’²å…¬è‹±ã€Firebaseã€é˜¿é‡Œäº‘ã€è…¾è®¯ä¹å›ºç­‰å¹³å°å‘å¸ƒåï¼ŒAPK å¯ç‹¬ç«‹ä¸‹è½½æ›´æ–°

------

## âœ… å»ºè®®çš„å¼€å‘æµç¨‹å›¾

```
å¯åŠ¨APP
  â†“
è¯·æ±‚æœåŠ¡å™¨æ¥å£ï¼Œè·å–UpdateInfo
  â†“
latestVersionCode > å½“å‰ç‰ˆæœ¬ï¼Ÿ
  â†“ æ˜¯
  â””â†’ æ˜¯å¦å¼ºåˆ¶æ›´æ–°ï¼Ÿ
        â””â†’ æ˜¯ï¼šå¼¹å‡ºä¸å¯å–æ¶ˆå¯¹è¯æ¡†
        â””â†’ å¦ï¼šå¯é€‰æ›´æ–°
              â†“
        ç”¨æˆ·ç‚¹å‡»ç«‹å³æ›´æ–°
              â†“
        ä¸‹è½½APKï¼ˆå¯æ˜¾ç¤ºè¿›åº¦ï¼‰
              â†“
        ä¸‹è½½å®Œæˆåè°ƒç”¨å®‰è£…å™¨ï¼ˆå…¼å®¹ FileProviderï¼‰
              â†“
        è·³è½¬ç³»ç»Ÿå®‰è£…æµç¨‹ï¼ˆæˆ–é™é»˜å®‰è£…ï¼Œéœ€è¦ç³»ç»Ÿæƒé™ï¼‰
```

------

## âœ… æ€»ç»“

| ç±»åˆ«     | æ¨è                                  |
| -------- | ------------------------------------- |
| æƒé™å¤„ç† | å®‰è£…æƒé™ã€FileProvider é…ç½®ã€ç½‘ç»œæƒé™ |
| ç”¨æˆ·ä½“éªŒ | è¿›åº¦ã€å¼¹çª—ã€å¼ºæ›´åˆ¤æ–­                  |
| å®‰å…¨æ€§   | ç­¾åä¸€è‡´æ ¡éªŒã€HTTPSã€ä¸‹è½½æ ¡éªŒ         |
| å¯ç»´æŠ¤æ€§ | æ¥å£æŠ½è±¡ã€ç°åº¦æ§åˆ¶ã€ç‰ˆæœ¬å…¼å®¹          |
| æ‰©å±•æ€§   | æ–­ç‚¹ç»­ä¼ ã€å¢é‡æ›´æ–°ã€åˆ†æ¸ é“æ§åˆ¶        |